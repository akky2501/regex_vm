#include<stdio.h>
#include "regex_vm.h"


int main(void){
	char* reg = /*"a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";*/"[_A-Za-z]([0-9_A-Za-z]|[^-+*/])*T";
	char* str = /*"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";*/"TetaumatawhakatangihangakoauaotamteaurehaeaturipukapihimaungahoronukupokaiwhenuaakitanarahuT";

	RegexVMCode vc = compileRegex(reg);	

	bool p;
	for(int i=0;i<10000;i++){
//	char* e = topMatch(vc,str);
	p = isMatch(vc,str);
//	printf("regex    : %s\n",reg);
//	printf("string   : %s\n",str);
//	printf("topMatch : %.*s\n",(int)(e-str),str);
	}
	printf("isMatch  : %s.\n\n",p?"accept":"failed");
	
	
	freeRegex(vc);
	return 0;
}



